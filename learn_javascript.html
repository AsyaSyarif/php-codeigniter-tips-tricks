<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script language="javascript" type="text/javascript">
            /**
            * Yuranga Library - Development
            * @author Sonny Nguyen <sonny@yuranga.com>
            */
            // usage: log('inside coolFunc',this,arguments);
            // http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
            window.log = function(){
                log.history = log.history || [];   // store logs to an array for reference
                log.history.push(arguments);
                if(this.console){
                    console.log( Array.prototype.slice.call(arguments) );
                }
            }
            log('Hello world');
             (function() {
                window.write = function(content) {
                    document.write(content);
                }
                
                window.print = function(content) {
                    document.write(content);
                }
                
            function meta(name, content) {
                write('<meta name="' + name + '" content="' + content + '">');
            }
            

                write('hello world');
            })();
            
            if (console === undefined ) {
                /*
                 console.log('some msg');
                console.info('information');
                console.warn('some warning');
                console.error('some error');
                console.assert(false, 'YOU FAIL');
                */
                
                /*
                function ieConsole() {
                    
                    this.log = function(text) {
                        alert(text);
                    }
                }
                var console = new ieConsole();
                */
               // second way
               /*
                var console = console || {};
                console.log = function(text) {
                    alert(text);
                }*/
                
                // three, dont need if statement
                //var console = console || { log: function(text){ alert(text); }};
                //var console=console||{"log":function(){}};
            }
    
            /* jQuery custom event */
            // ----------- jQuery custom event ----------------------------------+
            jQuery( document ).ready( function( $ ) {
                var first = setTimeout( function() {
                    $( document ).trigger( 'banana', 'First Banana' );
                    }, 1000
                );
                var second = setTimeout( function() {
                    $( document ).trigger( 'banana', 'Second Banana' );
                    }, 2000
                );
                var third = setTimeout( function() {
                    $( document ).trigger( 'banana', 'Third Banana' );
                    }, 3000
                );
                $( document ).bind( 'banana', function ( e, message ) {
                    console.log( message );
                } );
            } );
            // ------------------------------------------------------------------+   
            
            console.log('Start execution js script');
           var text =
        "This oracle of comfort has so pleased me, " +
        "That when I am in heaven I shall desire " +
        "To see what this child does, " +
        "and praise my Constructor.";
    console.log(text);

            function cat(name) {
                this.name = name;
                this.talk = function() {
                    //alert( this.name + " say meeow!" )
                    console.log(this.name + ' say meeow!');
                }
                this.setName = function(name) {
                    this.name = name;
                    return this;
                }
                this.sayHello = function(target_person) {
                    // alert('Hello ' + target_person + ', my name is ' + this.name);
                    console.log('Hello ' + target_person + ', my name is ' + this.name);
                }
            }
            
            cat.prototype.changeName = function(name) {
                this.name = name;
            }
            cat.prototype.getName = function() {
                return this.name;
            }
            


            cat1 = new cat("felix")
            cat1.talk() //alerts "felix says meeow!"

            cat2 = new cat("ginger")
            cat2.talk() //alerts "ginger says meeow!"
            cat2.setName('Kitty').sayHello('Andrew');
            cat2.talk()
            
            // prototype & extend
            //if(typeof Object.create !== "function") { Object.create = function (o) { function F() {} F.prototype = o; return new F(); }; }
            //extend object
            function extend(obj, props) { for(prop in props) { if(props.hasOwnProperty(prop)) { obj[prop] = props[prop]; } } }
            // exmaple
            extend(cat2, { sayGoodbye: function() { console.log("goodbye from " + this.name); } });
            cat2.sayGoodbye();
            
            
            console.log('call to getName method of cat2, here cat2.name: ' + cat2.getName());
            console.log('end execution js script');
            //If it's an anonymous function you also need to wrap it in parentheses.
            //“JavaScript Patterns” Book
            
            // callbacks
            function test(a, b, fn) {
                fn(a, b);
            }
            //test(1, 2, myFunc);
            test(1, 2, function(one, two){
                console.log(arguments);
            });

            //singleton pattern
            function Single() {
 
                var instance = this; 
 
                // add more to this�
 
                Single = function (){
                    return instance;  
                };
            }
 
            // test
            var my1 = new Single();
            var my2 = new Single();
            alert(my1 === my2) //true

            // singleton another way


            function Constructor() {
                return Constructor.getInstance(this);
            }

            Constructor.getInstance = function(){
                var instance;
                return function(that) {
                    if (typeof instance === 'undefined') {
                        instance = that;
                    }
                    return instance;
                }
            }();

            var obj = new Constructor();
            var obj2 = new Constructor();
            alert(obj === obj2); // true
            
            function doSomeThing() {
                this.todoList = 'Something to do';
                this.callback = null;
                this.init = function(todoList, callback) {
                    this.todoList = todoList;
                    this.callback = callback;
                    return this;
                }
                this.execute = function() {
                    write(this.todoList);
                    return this;
                }
                this.done = function() {
                    this.callback();
                }
            }
            
            var doHomeWork = new doSomeThing();
            doHomeWork.init('clearn the floor', function() {
                write('this is callback function');
                write('this is doHomeWork todo list: ' + this.todoList);
                // you can recall to do something in parent too
                this.execute();
            }).execute().done();
            
            
           
            

            //http://www.jspatterns.com
            //Object-Oriented JavaScript book
            //http://eloquentjavascript.net/chapter8.html | beautifull typo
            
            // another tutorail about js http://www.adobe.com/devnet/html5/articles/javascript-object-creation.html
        </script>
    </head>
    <body>
    </body>
</html>